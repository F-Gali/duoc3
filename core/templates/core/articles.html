{% extends 'core/base.html' %}

{% block title %}Articulos{% endblock %}
{% block articles %}active{% endblock %}
{% load static %}

{% block first_content %}

<section>
    <div class="container principal">
        <div class="card px-5 colorfondo">
            <div class="card-body fondo p-5">
                <h1 class="text-center">Artículos</h1>
                <hr>
            </br>
            {% if request.path|slice:"19:20" == "1" %}
                <div class="container filtro">
                    <a class="btn btn-light m-2 filtro" href="{% url 'articles' %}">
                        Mostrar todos los artículos
                    </a>
                    <a class="btn btn-dark m-2 filtro" href="{% url 'articles-company' compania=1 %}">
                        Mostrar artículos de Nintendo
                    </a>
                    <a class="btn btn-light m-2 filtro" href="{% url 'articles-company' compania=2 %}">
                        Mostrar artículos de Sony
                    </a>
                </div>
            {% elif request.path|slice:"19:20" == "2" %}
            <div class="container filtro">
                <a class="btn btn-light m-2 filtro" href="{% url 'articles' %}">
                    Mostrar todos los artículos
                </a>
                <a class="btn btn-light m-2 filtro" href="{% url 'articles-company' compania=1 %}">
                    Mostrar artículos de Nintendo
                </a>
                <a class="btn btn-dark m-2 filtro" href="{% url 'articles-company' compania=2 %}">
                    Mostrar artículos de Sony
                </a>
            </div>
            {% else %}
            <div class="container filtro">
                <a class="btn btn-dark m-2 filtro" href="{% url 'articles' %}">
                    Mostrar todos los artículos
                </a>
                <a class="btn btn-light m-2 filtro" href="{% url 'articles-company' compania=1 %}">
                    Mostrar artículos de Nintendo
                </a>
                <a class="btn btn-light m-2 filtro" href="{% url 'articles-company' compania=2 %}">
                    Mostrar artículos de Sony
                </a>
            </div>
            {% endif %} 
            
            
        </br>
    </br>
                {% for a in articulos %}
                            <article class="border  border-black p-2 mb-2 border-opacity-25 mb-5">
                                <h1 class="card-title text-center border-bottom border-danger">
                                    {{a.titulo}}
                                </h1>
                                {% if a.headerImage %}
                                <img src="{{a.headerImage.url}}" class="card-img-top p-3" alt="{{a.titulo}}">
                                {% endif %}
                                <p class="detalle-articulo text-center">
                                    Autor:{{a.autor}} | Fecha creación:{{a.creacion|date:"d-m-Y"}} | Tags: <a href="{% url 'articles-company' compania=a.id_compania_id %}">{{a.id_compania}}</a>
                                </p>
                                <p class="articulo-index">
                                    {{a.html_body|safe|slice:"0:320"}}...<a href="{% url 'article-complete' id_articulo=a.id %}">Ver más</a>
                                </p>
                            </article>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

{% endblock %}